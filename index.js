!function(e){function n(n){for(var t,r,i=n[0],u=n[1],c=0,l=[];c<i.length;c++)r=i[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&l.push(o[r][0]),o[r]=0;for(t in u)Object.prototype.hasOwnProperty.call(u,t)&&(e[t]=u[t]);for(a&&a(n);l.length;)l.shift()()}var t={},o={0:0};var r={};var i={3:function(){return{"./sudoku_bg.js":{__wbindgen_string_new:function(e,n){return t[2].exports.v(e,n)},__wbindgen_object_drop_ref:function(e){return t[2].exports.u(e)},__wbg_new_59cb74e423758ede:function(){return t[2].exports.j()},__wbg_stack_558ba5917b466edd:function(e,n){return t[2].exports.p(e,n)},__wbg_error_4bb6c2a97407129a:function(e,n){return t[2].exports.c(e,n)},__wbg_log_386a8115a84a780d:function(e){return t[2].exports.g(e)},__wbg_self_86b4b13392c7af56:function(){return t[2].exports.n()},__wbg_static_accessor_MODULE_452b4680e8614c81:function(){return t[2].exports.q()},__wbg_require_f5521a5b85ad2542:function(e,n,o){return t[2].exports.m(e,n,o)},__wbg_crypto_b8c92eaac23d0d80:function(e){return t[2].exports.b(e)},__wbg_msCrypto_9ad6677321a08dd8:function(e){return t[2].exports.h(e)},__wbindgen_is_undefined:function(e){return t[2].exports.s(e)},__wbg_getRandomValues_dd27e6b0652b3236:function(e){return t[2].exports.d(e)},__wbg_getRandomValues_e57c9b75ddead065:function(e,n){return t[2].exports.e(e,n)},__wbg_randomFillSync_d2ba53160aec6aba:function(e,n,o){return t[2].exports.l(e,n,o)},__wbg_buffer_ebc6c8e75510eae3:function(e){return t[2].exports.a(e)},__wbg_length_317f0dd77f7a6673:function(e){return t[2].exports.f(e)},__wbg_new_135e963dedf67b22:function(e){return t[2].exports.i(e)},__wbg_set_4a5072a31008e0cb:function(e,n,o){return t[2].exports.o(e,n,o)},__wbg_newwithlength_78dc302d31527318:function(e){return t[2].exports.k(e)},__wbg_subarray_34c228a45c72d146:function(e,n,o){return t[2].exports.r(e,n,o)},__wbindgen_throw:function(e,n){return t[2].exports.w(e,n)},__wbindgen_memory:function(){return t[2].exports.t()}}}}};function u(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,u),o.l=!0,o.exports}u.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var c=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=c);var l,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=function(e){return u.p+""+e+".index.js"}(e);var a=new Error;l=function(n){s.onerror=s.onload=null,clearTimeout(d);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",a.name="ChunkLoadError",a.type=r,a.request=i,t[1](a)}o[e]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:s})}),12e4);s.onerror=s.onload=l,document.head.appendChild(s)}return({1:[3]}[e]||[]).forEach((function(e){var t=r[e];if(t)n.push(t);else{var o,c=i[e](),l=fetch(u.p+""+{3:"d3cedd2aba46bf77e243"}[e]+".module.wasm");if(c instanceof Promise&&"function"==typeof WebAssembly.compileStreaming)o=Promise.all([WebAssembly.compileStreaming(l),c]).then((function(e){return WebAssembly.instantiate(e[0],e[1])}));else if("function"==typeof WebAssembly.instantiateStreaming)o=WebAssembly.instantiateStreaming(l,c);else{o=l.then((function(e){return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,c)}))}n.push(r[e]=o.then((function(n){return u.w[e]=(n.instance||n).exports})))}})),Promise.all(n)},u.m=e,u.c=t,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)u.d(t,o,function(n){return e[n]}.bind(null,o));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="",u.oe=function(e){throw console.error(e),e},u.w={};var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var s=0;s<c.length;s++)n(c[s]);var a=l;u(u.s=0)}([function(e,n,t){t.e(1).then(t.bind(null,1)).then(e=>{var n=!1,t=w("//li/span"),o=document.getElementById("count"),r="setter",u=document.getElementById("app_mode"),c=document.getElementById("setter-side"),l=new Set,s=document.getElementById("save"),a=!1,d=document.getElementById("diag_pos_vis"),f=!1,_=document.getElementById("diag_neg_vis"),m=!1,g=document.getElementById("diag_pos_button"),p=document.getElementById("diag_neg_button"),b=document.getElementById("king_button"),h=document.getElementById("solving_url"),v=document.getElementById("setting_url");function w(e){let n=[],t=document.evaluate(e,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0,o=t.snapshotLength;e<o;++e)n.push(t.snapshotItem(e));return n}function y(){for(i=0;i<t.length;i++)full_cell=t[i].parentElement,l.has(i)?full_cell.classList.add("selected"):full_cell.classList.remove("selected")}function E(){L(a,g),a?d.classList.add("diag","diag-pos"):d.classList.remove("diag-pos"),L(f,p),f?_.classList.add("diag","diag-neg"):_.classList.remove("diag-neg"),L(m,b)}function L(e,n){e?(n.classList.add("toggle-on"),n.classList.remove("toggle-off")):(n.classList.remove("toggle-on"),n.classList.add("toggle-off"))}function x(e){e=parseInt(e)||e;var n="setter"==r?"clue":"human";if(Number.isInteger(e)&&e>=1&&e<=9){for(let t of l)k(t)&&C(t,e,n);A()}else if("Delete"==e||"Backspace"==e){for(let e of l)k(e)&&C(e,"",n);A()}else console.log("unhandled event",e)}function k(e){if("setter"==r)return!0;if("solver"==r)return!t[e].classList.contains("clue");throw"unknown app_mode"}function I(){r="setter"==r?"solver":"setter",u.innerHTML=r,"setter"==r?c.classList.remove("hidden"):c.classList.add("hidden"),A()}function B(){for(i=0;i<t.length;i++)C(i,"","computer");A()}function O(){for(i=0;i<t.length;i++)C(i,"","human");A()}function P(){for(i=0;i<t.length;i++)C(i,"","clue");A()}function S(e){for(line="",i=0;i<81;i++){e(t[i],t[i].innerHTML)?line+=t[i].innerHTML:line+="."}return line}function j(){return line="",a&&(line+=";diag_pos"),f&&(line+=";diag_neg"),m&&(line+=";king"),line}function T(){return S((e,n)=>""!=n)+j()}function W(e=!0){var n="clue"+S(e=>e.classList.contains("clue")),t="";return e&&(t=";human"+S(e=>e.classList.contains("human"))),n+t+j()}function M(e){a=!1,f=!1,m=!1,e.split(";").forEach(e=>{e.startsWith("clue")?q(e.slice(4),"clue"):e.startsWith("human")?q(e.slice(5),"human"):e.startsWith("diag_pos")?a=!0:e.startsWith("diag_neg")?f=!0:e.startsWith("king")&&(m=!0)}),E(),A()}function A(){var n=W();if(s!==document.activeElement&&(s.value=n),H(),"setter"==r){var t=performance.now(),i=e.solution_count(T());o.innerHTML=0==i?"No solution":1e3==i?"1000 or more solutions":i;var u=performance.now();console.log("solution count timing: ",u-t)}}function N(e=null){return null!=e||n?"&solve":""}function H(){var e=(full_url=window.location.href,full_url.split("?")[0]+"?data="),n=e+W()+N();window.history.replaceState({},"",n),v.href=e+W(),h.href=e+W(!1)+N(!0)}function D(){var n=e.solve_common(T());81==n.length&&(q(n,"computer"),A())}function R(){q(e.generate(),"clue")}function q(e,n="human"){for(i=0;i<81;i++){var t=e[i];void 0!==t&&"."!==t||(t=""),C(i,t,n)}A()}function C(e,n="",o="human"){switch(cell=t[e],cl=cell.classList,o){case"clue":cl.remove("human","computer");break;case"human":if(cl.contains("clue"))return;cl.remove("computer");break;case"computer":if(cl.contains("clue")||cl.contains("human"))return;break;default:console.error("UNKNOWN KIND: ",o)}cell.innerHTML=n,""==n?cl.remove("clue","human","computer"):cl.add(o)}e.init(),function(){solve=w('//button[@id="solve"]')[0],solve.onclick=D,new_sudoku=w('//button[@id="new"]')[0],new_sudoku.onclick=R,cc_button=document.getElementById("clear_computer"),cc_button.onclick=B,clear_button=document.getElementById("clear"),clear_button.onclick=O,reset_button=document.getElementById("reset"),reset_button.onclick=P,app_mode_button=document.getElementById("app_mode_button"),app_mode_button.onclick=I,g.onclick=e=>{a=!a,E(),A()},p.onclick=e=>{f=!f,E(),A()},b.onclick=e=>{m=!m,E(),A()};var e=document.getElementById("number").children;for(let n=0;n<e.length;n++){let t=e[n];t.onclick=e=>{x(t.innerHTML)}}}(),function(){var e=!1;function n(e){return n=>{n.shiftKey||l.clear(),l.add(e),y()}}function o(n){return t=>{e&&(l.add(n),y())}}for(i=0;i<t.length;i++)full_cell=t[i].parentElement,full_cell.addEventListener("mousedown",n(i)),full_cell.addEventListener("mouseover",o(i));document.addEventListener("mousedown",()=>e=!0),document.addEventListener("mouseup",()=>e=!1)}(),s.addEventListener("input",e=>{s.value!=T()&&M(s.value),H()}),document.addEventListener("keydown",e=>{x(e.key)});var K=new URLSearchParams(window.location.search);null!=K.get("solve")&&(n=!0,"setter"==r&&I(),document.getElementById("app_mode_button").remove());var U=K.get("data");null!=U&&M(U)})}]);